!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("stimulus")):"function"==typeof define&&define.amd?define(["stimulus"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["stimulus-rails-nested-form"]=t(e.Stimulus)}(this,(function(e){"use strict";class t extends e.Controller{initialize(){this.wrapperSelector=this.wrapperSelectorValue||".nested-form-wrapper",this.actionSelector=this.actionSelectorValue||".nested-form-action"}add(e){e.preventDefault();const t=e.target.closest(this.actionSelector),r=(e,t)=>{e.insertAdjacentHTML("beforebegin",t)},s=(new Date).getTime().toString();if(t){const e=t.dataset.model,a=this.templateTargets.find((t=>t.dataset.modelTemplate===e));r(this.targetTargets.find((t=>t.dataset.modelTarget===e)),a.innerHTML.replace(/NEW_RECORD/g,s))}else{const e=this.templateTarget.innerHTML.replace(/NEW_RECORD/g,s);this.targetTarget.insertAdjacentHTML("beforebegin",e),r(this.targetTarget,e)}}remove(e){e.preventDefault();const t=e.target.closest(this.wrapperSelector);if("true"===t.dataset.newRecord)t.remove();else{t.style.display="none";t.querySelector("input[name*='_destroy']").value="1"}}}return t.targets=["target","template"],t.values={wrapperSelector:String,actionSelector:String},t}));
