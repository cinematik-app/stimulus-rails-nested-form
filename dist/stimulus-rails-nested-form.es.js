import{Controller as e}from"stimulus";class t extends e{initialize(){this.wrapperSelector=this.wrapperSelectorValue||".nested-form-wrapper",this.actionSelector=this.actionSelectorValue||".nested-form-action"}add(e){e.preventDefault();const t=e.target.closest(this.actionSelector),r=(e,t)=>{e.insertAdjacentHTML("beforebegin",t)},a=(new Date).getTime().toString();if(t){const e=t.dataset.model,s=this.templateTargets.find((t=>t.dataset.modelTemplate===e));r(this.targetTargets.find((t=>t.dataset.modelTarget===e)),s.innerHTML.replace(/NEW_RECORD/g,a))}else{const e=this.templateTarget.innerHTML.replace(/NEW_RECORD/g,a);this.targetTarget.insertAdjacentHTML("beforebegin",e),r(this.targetTarget,e)}}remove(e){e.preventDefault();const t=e.target.closest(this.wrapperSelector);if("true"===t.dataset.newRecord)t.remove();else{t.style.display="none";t.querySelector("input[name*='_destroy']").value="1"}}}t.targets=["target","template"],t.values={wrapperSelector:String,actionSelector:String};export{t as default};
